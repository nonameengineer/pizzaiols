{"version":3,"sources":["./src/app/modules/pizzas/pizzas-routing.module.ts","./src/app/modules/pizzas/pizzas.component.ts","./src/app/modules/pizzas/pizzas.component.html","./src/app/modules/pizzas/pizzas.module.ts","./src/app/modules/shared/pizza-toppings/pizza-toppings.component.ts","./src/app/modules/shared/pizza-toppings/pizza-toppings.component.html","./src/app/modules/shared/pizza-toppings/pizza-toppings.module.ts"],"names":[],"mappings":"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","file":"modules-pizzas-pizzas-module-es2015.js","sourcesContent":["import {NgModule} from '@angular/core';\nimport {RouterModule, Routes} from '@angular/router';\nimport {PizzasComponent} from '@app/modules/pizzas/pizzas.component';\n\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PizzasComponent,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class PizzasRoutingModule { }\n","import {AfterContentChecked, AfterContentInit, Component, OnDestroy, OnInit} from '@angular/core';\nimport {Unsubscribe} from '@app/interfaces/unsubscribe.interface';\nimport {BehaviorSubject, combineLatest, Observable, of, Subject} from 'rxjs';\nimport {select, Store} from '@ngrx/store';\nimport {RootStoreState} from '@app/store/root';\nimport {filter, map, startWith, switchMap, takeUntil, tap, withLatestFrom} from 'rxjs/operators';\nimport {PizzasStoreActions, PizzasStoreSelectors} from '@app/store/root/client';\nimport {GetPizzasResponse} from '@app/models/pizzas/get-pizzas-response.model';\nimport {FormBuilder} from '@angular/forms';\n\n@Component({\n  selector: 'app-pizzas',\n  templateUrl: './pizzas.component.html',\n  styleUrls: ['./pizzas.component.scss']\n})\nexport class PizzasComponent implements OnInit, AfterContentChecked, OnDestroy, Unsubscribe {\n  readonly unsubscribe = new Subject<void>();\n\n  form = this.fb.group({\n    toppings: [[]]\n  });\n\n  pizzasResponse$: Observable<GetPizzasResponse> = this.store.pipe(\n    select(PizzasStoreSelectors.getPizzasResponseState),\n    takeUntil(this.unsubscribe)\n  );\n\n  pizzas$: Observable<any[]> = combineLatest([\n    this.form.controls.toppings.valueChanges,\n    this.pizzasResponse$\n  ]).pipe(\n    map((results) => {\n      const toppings = results[0];\n      const pizzasResponse = results[1];\n\n      if (toppings.length > 0) {\n        return pizzasResponse.pizzas.filter(pizza =>\n          toppings.some(topping => pizza.toppings.includes(topping))\n        );\n      } else {\n        return pizzasResponse.pizzas;\n      }\n    })\n  );\n\n  constructor(\n    private store: Store<RootStoreState.State>,\n    private fb: FormBuilder\n  ) {\n    this.form.controls.toppings.enable();\n  }\n\n  ngOnInit(): void {\n    this.store.dispatch(new PizzasStoreActions.GetPizzas());\n  }\n\n  ngAfterContentChecked(): void {\n    this.form.controls.toppings.enable();\n  }\n\n  ngOnDestroy(): void {\n    this.unsubscribe.next();\n  }\n}\n","<app-navbar></app-navbar>\n<div class=\"container\" [formGroup]=\"form\">\n  <h1>Pizzas</h1>\n  <div class=\"filter\">\n    <app-pizza-toppings formControlName=\"toppings\"></app-pizza-toppings>\n  </div>\n  <div class=\"pizzas\">\n    <ng-container *ngFor=\"let pizza of (pizzas$ | async)\">\n      <app-pizza-card  [pizza]=\"pizza\" class=\"pizza-card\"></app-pizza-card>\n    </ng-container>\n  </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { PizzasRoutingModule } from './pizzas-routing.module';\nimport { PizzasComponent } from './pizzas.component';\nimport {NavbarModule} from '@app/modules/shared/navbar/navbar.module';\nimport {PizzaCardModule} from '@app/modules/shared/pizza-card/pizza-card.module';\nimport {PizzaToppingsModule} from '@app/modules/shared/pizza-toppings/pizza-toppings.module';\nimport {ReactiveFormsModule} from '@angular/forms';\n\n\n@NgModule({\n  declarations: [PizzasComponent],\n  imports: [\n    CommonModule,\n    PizzasRoutingModule,\n    NavbarModule,\n    PizzaCardModule,\n    PizzaToppingsModule,\n    ReactiveFormsModule\n  ],\n  exports: [PizzasComponent]\n})\nexport class PizzasModule { }\n","import {Component, forwardRef, OnInit} from '@angular/core';\nimport {ControlValueAccessor, NG_VALUE_ACCESSOR} from '@angular/forms';\n\nconst PIZZA_TOPPINGS_ACCESSOR = {\n  provide: NG_VALUE_ACCESSOR,\n  useExisting: forwardRef(() => PizzaToppingsComponent),\n  multi: true\n};\n\n@Component({\n  selector: 'app-pizza-toppings',\n  providers: [PIZZA_TOPPINGS_ACCESSOR],\n  templateUrl: './pizza-toppings.component.html',\n  styleUrls: ['./pizza-toppings.component.scss']\n})\nexport class PizzaToppingsComponent implements ControlValueAccessor {\n\n  toppings = [\n    'anchovy', 'bacon', 'basil', 'chili', 'mozzarella', 'mushroom',\n    'olive', 'onion', 'pepper', 'pepperoni', 'sweetcorn', 'tomato'\n  ];\n\n  value: string[] = [];\n  focused: string;\n\n  onTouch: Function;\n  onModelChange: Function;\n\n  registerOnChange(fn) {\n    this.onModelChange = fn;\n  }\n\n  registerOnTouched(fn) {\n    this.onTouch = fn;\n  }\n\n  writeValue(value) {\n    this.value = value;\n  }\n\n  updateTopping(topping: string) {\n    if (this.value.includes(topping)) {\n      this.value = this.value.filter((x: string) => topping !== x);\n    } else {\n      this.value = this.value.concat([topping]);\n    }\n    this.onModelChange(this.value);\n  }\n\n  onBlur(value: string) {\n    this.focused = '';\n  }\n\n  onFocus(value: string) {\n    this.focused = value;\n    this.onTouch();\n  }\n}\n","<div class=\"pizza-toppings\">\n  <label\n    *ngFor=\"let topping of toppings\"\n    class=\"pizza-topping\"\n    [class.pizza-topping--active]=\"value.includes(topping)\"\n    [class.pizza-topping--focused]=\"focused === topping\">\n    <input\n      type=\"checkbox\"\n      [attr.name]=\"topping\"\n      [attr.value]=\"topping\"\n      (blur)=\"onBlur(topping)\"\n      (change)=\"updateTopping(topping)\"\n      (focus)=\"onFocus(topping)\"\n      [checked]=\"value.includes(topping)\">\n    <span class=\"pizza-topping__icon pizza-topping__icon--{{ topping }}\"></span>\n    {{ topping | titlecase }}\n  </label>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { PizzaToppingsComponent } from './pizza-toppings.component';\n\n\n\n@NgModule({\n  declarations: [PizzaToppingsComponent],\n  imports: [\n    CommonModule\n  ],\n  exports: [PizzaToppingsComponent]\n})\nexport class PizzaToppingsModule { }\n"],"sourceRoot":"webpack:///"}