{"version":3,"sources":["webpack:///src/app/modules/pizzas/pizzas-routing.module.ts","webpack:///src/app/modules/pizzas/pizzas.component.ts","webpack:///src/app/modules/pizzas/pizzas.component.html","webpack:///src/app/modules/pizzas/pizzas.module.ts","webpack:///src/app/modules/shared/pizza-toppings/pizza-toppings.component.ts","webpack:///src/app/modules/shared/pizza-toppings/pizza-toppings.component.html","webpack:///src/app/modules/shared/pizza-toppings/pizza-toppings.module.ts"],"names":["routes","path","component","PizzasRoutingModule","forChild","imports","exports","PizzasComponent","store","fb","unsubscribe","form","group","toppings","pizzasResponse$","pipe","getPizzasResponseState","pizzas$","controls","valueChanges","results","pizzasResponse","length","pizzas","filter","pizza","some","topping","includes","enable","dispatch","GetPizzas","next","selector","templateUrl","styleUrls","PizzasModule","declarations","PIZZA_TOPPINGS_ACCESSOR","provide","useExisting","PizzaToppingsComponent","multi","value","fn","onModelChange","onTouch","x","concat","focused","providers","PizzaToppingsModule"],"mappings":"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","file":"modules-pizzas-pizzas-module-es5.js","sourcesContent":["import {NgModule} from '@angular/core';\nimport {RouterModule, Routes} from '@angular/router';\nimport {PizzasComponent} from '@app/modules/pizzas/pizzas.component';\n\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PizzasComponent,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class PizzasRoutingModule { }\n","import {AfterContentChecked, AfterContentInit, Component, OnDestroy, OnInit} from '@angular/core';\nimport {Unsubscribe} from '@app/interfaces/unsubscribe.interface';\nimport {BehaviorSubject, combineLatest, Observable, of, Subject} from 'rxjs';\nimport {select, Store} from '@ngrx/store';\nimport {RootStoreState} from '@app/store/root';\nimport {filter, map, startWith, switchMap, takeUntil, tap, withLatestFrom} from 'rxjs/operators';\nimport {PizzasStoreActions, PizzasStoreSelectors} from '@app/store/root/client';\nimport {GetPizzasResponse} from '@app/models/pizzas/get-pizzas-response.model';\nimport {FormBuilder} from '@angular/forms';\n\n@Component({\n  selector: 'app-pizzas',\n  templateUrl: './pizzas.component.html',\n  styleUrls: ['./pizzas.component.scss']\n})\nexport class PizzasComponent implements OnInit, AfterContentChecked, OnDestroy, Unsubscribe {\n  readonly unsubscribe = new Subject<void>();\n\n  form = this.fb.group({\n    toppings: [[]]\n  });\n\n  pizzasResponse$: Observable<GetPizzasResponse> = this.store.pipe(\n    select(PizzasStoreSelectors.getPizzasResponseState),\n    takeUntil(this.unsubscribe)\n  );\n\n  pizzas$: Observable<any[]> = combineLatest([\n    this.form.controls.toppings.valueChanges,\n    this.pizzasResponse$\n  ]).pipe(\n    map((results) => {\n      const toppings = results[0];\n      const pizzasResponse = results[1];\n\n      if (toppings.length > 0) {\n        return pizzasResponse.pizzas.filter(pizza =>\n          toppings.some(topping => pizza.toppings.includes(topping))\n        );\n      } else {\n        return pizzasResponse.pizzas;\n      }\n    })\n  );\n\n  constructor(\n    private store: Store<RootStoreState.State>,\n    private fb: FormBuilder\n  ) {\n    this.form.controls.toppings.enable();\n  }\n\n  ngOnInit(): void {\n    this.store.dispatch(new PizzasStoreActions.GetPizzas());\n  }\n\n  ngAfterContentChecked(): void {\n    this.form.controls.toppings.enable();\n  }\n\n  ngOnDestroy(): void {\n    this.unsubscribe.next();\n  }\n}\n","<app-navbar></app-navbar>\n<div class=\"container\" [formGroup]=\"form\">\n  <h1>Pizzas</h1>\n  <div class=\"filter\">\n    <app-pizza-toppings formControlName=\"toppings\"></app-pizza-toppings>\n  </div>\n  <div class=\"pizzas\">\n    <ng-container *ngFor=\"let pizza of (pizzas$ | async)\">\n      <app-pizza-card  [pizza]=\"pizza\" class=\"pizza-card\"></app-pizza-card>\n    </ng-container>\n  </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { PizzasRoutingModule } from './pizzas-routing.module';\nimport { PizzasComponent } from './pizzas.component';\nimport {NavbarModule} from '@app/modules/shared/navbar/navbar.module';\nimport {PizzaCardModule} from '@app/modules/shared/pizza-card/pizza-card.module';\nimport {PizzaToppingsModule} from '@app/modules/shared/pizza-toppings/pizza-toppings.module';\nimport {ReactiveFormsModule} from '@angular/forms';\n\n\n@NgModule({\n  declarations: [PizzasComponent],\n  imports: [\n    CommonModule,\n    PizzasRoutingModule,\n    NavbarModule,\n    PizzaCardModule,\n    PizzaToppingsModule,\n    ReactiveFormsModule\n  ],\n  exports: [PizzasComponent]\n})\nexport class PizzasModule { }\n","import {Component, forwardRef, OnInit} from '@angular/core';\nimport {ControlValueAccessor, NG_VALUE_ACCESSOR} from '@angular/forms';\n\nconst PIZZA_TOPPINGS_ACCESSOR = {\n  provide: NG_VALUE_ACCESSOR,\n  useExisting: forwardRef(() => PizzaToppingsComponent),\n  multi: true\n};\n\n@Component({\n  selector: 'app-pizza-toppings',\n  providers: [PIZZA_TOPPINGS_ACCESSOR],\n  templateUrl: './pizza-toppings.component.html',\n  styleUrls: ['./pizza-toppings.component.scss']\n})\nexport class PizzaToppingsComponent implements ControlValueAccessor {\n\n  toppings = [\n    'anchovy', 'bacon', 'basil', 'chili', 'mozzarella', 'mushroom',\n    'olive', 'onion', 'pepper', 'pepperoni', 'sweetcorn', 'tomato'\n  ];\n\n  value: string[] = [];\n  focused: string;\n\n  onTouch: Function;\n  onModelChange: Function;\n\n  registerOnChange(fn) {\n    this.onModelChange = fn;\n  }\n\n  registerOnTouched(fn) {\n    this.onTouch = fn;\n  }\n\n  writeValue(value) {\n    this.value = value;\n  }\n\n  updateTopping(topping: string) {\n    if (this.value.includes(topping)) {\n      this.value = this.value.filter((x: string) => topping !== x);\n    } else {\n      this.value = this.value.concat([topping]);\n    }\n    this.onModelChange(this.value);\n  }\n\n  onBlur(value: string) {\n    this.focused = '';\n  }\n\n  onFocus(value: string) {\n    this.focused = value;\n    this.onTouch();\n  }\n}\n","<div class=\"pizza-toppings\">\n  <label\n    *ngFor=\"let topping of toppings\"\n    class=\"pizza-topping\"\n    [class.pizza-topping--active]=\"value.includes(topping)\"\n    [class.pizza-topping--focused]=\"focused === topping\">\n    <input\n      type=\"checkbox\"\n      [attr.name]=\"topping\"\n      [attr.value]=\"topping\"\n      (blur)=\"onBlur(topping)\"\n      (change)=\"updateTopping(topping)\"\n      (focus)=\"onFocus(topping)\"\n      [checked]=\"value.includes(topping)\">\n    <span class=\"pizza-topping__icon pizza-topping__icon--{{ topping }}\"></span>\n    {{ topping | titlecase }}\n  </label>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { PizzaToppingsComponent } from './pizza-toppings.component';\n\n\n\n@NgModule({\n  declarations: [PizzaToppingsComponent],\n  imports: [\n    CommonModule\n  ],\n  exports: [PizzaToppingsComponent]\n})\nexport class PizzaToppingsModule { }\n"]}